{"version":3,"names":["hookInvoke","obj","onCalling","onCalled","Proxy","get","target","propKey","origMethod","_len","arguments","length","args","Array","_key","Promise","resolve","name","returned","apply","then","catch"],"sources":["hookInvoke.js"],"sourcesContent":["/**\n * Add hooks before an object's method is being called and after.\n * @alias lang.hookInvoke\n * @param {*} obj\n * @param {*} onCalling - Before hook\n * @param {*} onCalled - After hook\n * @returns {Object} The hooked object\n */\nconst hookInvoke = (obj, onCalling, onCalled) =>\n    new Proxy(obj, {\n        get(target, propKey /*, receiver*/) {\n            const origMethod = target[propKey];\n            if (typeof origMethod === 'function') {\n                return function (...args) {\n                    onCalling && Promise.resolve(onCalling(obj, { name: propKey, args }));\n                    let returned = origMethod.apply(target, args);\n                    onCalled &&\n                        Promise.resolve(returned)\n                            .then((returned) => Promise.resolve(onCalled(obj, { name: propKey, returned })))\n                            .catch();\n                    return returned;\n                };\n            }\n\n            return origMethod;\n        },\n    });\n\nexport default hookInvoke;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMA,UAAU,GAAGA,CAACC,GAAG,EAAEC,SAAS,EAAEC,QAAQ,KACxC,IAAIC,KAAK,CAACH,GAAG,EAAE;EACXI,GAAGA,CAACC,MAAM,EAAEC,OAAO,CAAC,gBAAgB;IAChC,MAAMC,UAAU,GAAGF,MAAM,CAACC,OAAO,CAAC;IAClC,IAAI,OAAOC,UAAU,KAAK,UAAU,EAAE;MAClC,OAAO,YAAmB;QAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAANC,IAAI,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;UAAJF,IAAI,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;QAAA;QACpBZ,SAAS,IAAIa,OAAO,CAACC,OAAO,CAACd,SAAS,CAACD,GAAG,EAAE;UAAEgB,IAAI,EAAEV,OAAO;UAAEK;QAAK,CAAC,CAAC,CAAC;QACrE,IAAIM,QAAQ,GAAGV,UAAU,CAACW,KAAK,CAACb,MAAM,EAAEM,IAAI,CAAC;QAC7CT,QAAQ,IACJY,OAAO,CAACC,OAAO,CAACE,QAAQ,CAAC,CACpBE,IAAI,CAAEF,QAAQ,IAAKH,OAAO,CAACC,OAAO,CAACb,QAAQ,CAACF,GAAG,EAAE;UAAEgB,IAAI,EAAEV,OAAO;UAAEW;QAAS,CAAC,CAAC,CAAC,CAAC,CAC/EG,KAAK,CAAC,CAAC;QAChB,OAAOH,QAAQ;MACnB,CAAC;IACL;IAEA,OAAOV,UAAU;EACrB;AACJ,CAAC,CAAC;AAEN,eAAeR,UAAU"}