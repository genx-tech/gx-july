{"version":3,"sources":["dbgGetCallerFile.js"],"names":["dbgGetCallerFile","depth","originalFunc","Error","prepareStackTrace","callerfile","err","currentfile","currentDepth","stack","shift","getFileName","length"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA,SAASA,gBAAT,GAAqC;AAAA,MAAXC,KAAW,uEAAH,CAAG;AACjC,QAAMC,YAAY,GAAGC,KAAK,CAACC,iBAA3B;AAEA,MAAIC,UAAJ;;AACA,MAAI;AACA,UAAMC,GAAG,GAAG,IAAIH,KAAJ,EAAZ;AACA,QAAII,WAAJ;AACA,QAAIC,YAAY,GAAG,CAAnB;;AAEAL,IAAAA,KAAK,CAACC,iBAAN,GAA0B,UAAUE,GAAV,EAAeG,KAAf,EAAsB;AAC5C,aAAOA,KAAP;AACH,KAFD;;AAIAF,IAAAA,WAAW,GAAGD,GAAG,CAACG,KAAJ,CAAUC,KAAV,GAAkBC,WAAlB,EAAd;;AAEA,WAAOL,GAAG,CAACG,KAAJ,CAAUG,MAAjB,EAAyB;AACrBP,MAAAA,UAAU,GAAGC,GAAG,CAACG,KAAJ,CAAUC,KAAV,GAAkBC,WAAlB,EAAb;;AAEA,UAAIJ,WAAW,KAAKF,UAApB,EAAgC;AAC5BG,QAAAA,YAAY;AACZD,QAAAA,WAAW,GAAGF,UAAd;AACA,YAAIG,YAAY,GAAGP,KAAnB,EAA0B;AAC7B;AACJ,KAnBD,CAoBA;;AACH,GArBD,SAqBU,CACT;;AAEDE,EAAAA,KAAK,CAACC,iBAAN,GAA0BF,YAA1B;AAEA,SAAOG,UAAP;AACH;;eAEcL,gB","sourcesContent":["/**\n * Get the nth call file name from callstack\n * @param {integer} depth - the nth depth, 0 means the file call this function, usually depth 1 is most expected result\n * @returns {string} filename\n */\nfunction dbgGetCallerFile(depth = 1) {\n    const originalFunc = Error.prepareStackTrace;\n\n    let callerfile;\n    try {\n        const err = new Error();\n        let currentfile;\n        let currentDepth = 0;\n\n        Error.prepareStackTrace = function (err, stack) {\n            return stack;\n        };\n\n        currentfile = err.stack.shift().getFileName();\n\n        while (err.stack.length) {\n            callerfile = err.stack.shift().getFileName();\n\n            if (currentfile !== callerfile) {\n                currentDepth++;\n                currentfile = callerfile;\n                if (currentDepth > depth) break;\n            }\n        }\n        // eslint-disable-next-line no-empty\n    } finally {\n    }\n\n    Error.prepareStackTrace = originalFunc;\n\n    return callerfile;\n}\n\nexport default dbgGetCallerFile;\n"]}