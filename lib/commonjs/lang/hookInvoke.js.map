{"version":3,"names":["hookInvoke","obj","onCalling","onCalled","Proxy","get","target","propKey","origMethod","args","Promise","resolve","name","returned","apply","then","catch","_default","exports","default","module"],"sources":["hookInvoke.js"],"sourcesContent":["/**\n * Add hooks before an object's method is being called and after.\n * @alias lang.hookInvoke\n * @param {*} obj\n * @param {*} onCalling - Before hook\n * @param {*} onCalled - After hook\n * @returns {Object} The hooked object\n */\nconst hookInvoke = (obj, onCalling, onCalled) =>\n    new Proxy(obj, {\n        get(target, propKey /*, receiver*/) {\n            const origMethod = target[propKey];\n            if (typeof origMethod === 'function') {\n                return function (...args) {\n                    onCalling && Promise.resolve(onCalling(obj, { name: propKey, args }));\n                    let returned = origMethod.apply(target, args);\n                    onCalled &&\n                        Promise.resolve(returned)\n                            .then((returned) => Promise.resolve(onCalled(obj, { name: propKey, returned })))\n                            .catch();\n                    return returned;\n                };\n            }\n\n            return origMethod;\n        },\n    });\n\nexport default hookInvoke;\n"],"mappings":";;;;;;AAQA,MAAMA,UAAU,GAAGA,CAACC,GAAG,EAAEC,SAAS,EAAEC,QAAQ,KACxC,IAAIC,KAAK,CAACH,GAAG,EAAE;EACXI,GAAGA,CAACC,MAAM,EAAEC,OAAO,EAAiB;IAChC,MAAMC,UAAU,GAAGF,MAAM,CAACC,OAAO,CAAC;IAClC,IAAI,OAAOC,UAAU,KAAK,UAAU,EAAE;MAClC,OAAO,UAAU,GAAGC,IAAI,EAAE;QACtBP,SAAS,IAAIQ,OAAO,CAACC,OAAO,CAACT,SAAS,CAACD,GAAG,EAAE;UAAEW,IAAI,EAAEL,OAAO;UAAEE;QAAK,CAAC,CAAC,CAAC;QACrE,IAAII,QAAQ,GAAGL,UAAU,CAACM,KAAK,CAACR,MAAM,EAAEG,IAAI,CAAC;QAC7CN,QAAQ,IACJO,OAAO,CAACC,OAAO,CAACE,QAAQ,CAAC,CACpBE,IAAI,CAAEF,QAAQ,IAAKH,OAAO,CAACC,OAAO,CAACR,QAAQ,CAACF,GAAG,EAAE;UAAEW,IAAI,EAAEL,OAAO;UAAEM;QAAS,CAAC,CAAC,CAAC,CAAC,CAC/EG,KAAK,CAAC,CAAC;QAChB,OAAOH,QAAQ;MACnB,CAAC;IACL;IAEA,OAAOL,UAAU;EACrB;AACJ,CAAC,CAAC;AAAC,IAAAS,QAAA,GAEQjB,UAAU;AAAAkB,OAAA,CAAAC,OAAA,GAAAF,QAAA;AAAAG,MAAA,CAAAF,OAAA,GAAAA,OAAA,CAAAC,OAAA"}