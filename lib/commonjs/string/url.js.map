{"version":3,"sources":["url.js"],"names":["join","base","extraPath","appendQuery","url","query","posQM","indexOf","objectToQueryString","split","qs","previousObj","queryStringToObject","newObj","newQs","substr","parts","reduce","r","pair","k","v","decodeURIComponent","obj","part","encodeURIComponent","push"],"mappings":";;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASA,IAAT,CAAcC,IAAd,EAAoBC,SAApB,EAA+B;AAClC,SAAOD,IAAI,GACLC,SAAS,GACL,0BAAeD,IAAf,EAAqB,GAArB,IAA4B,4BAAiBC,SAAjB,EAA4B,GAA5B,CADvB,GAELD,IAHC,GAILC,SAJN;AAKH;AAED;AACA;AACA;AACA;AACA;AACA;;;AACO,SAASC,WAAT,CAAqBC,GAArB,EAA0BC,KAA1B,EAAiC;AACpC,MAAI,CAACA,KAAL,EAAY,OAAOD,GAAP;AAEZ,MAAME,KAAK,GAAGF,GAAG,CAACG,OAAJ,CAAY,GAAZ,CAAd;;AAEA,MAAID,KAAK,KAAK,CAAC,CAAf,EAAkB;AACd,QAAI,OAAOD,KAAP,KAAiB,QAArB,EAA+B;AAC3BA,MAAAA,KAAK,GAAGG,mBAAmB,CAACH,KAAD,CAA3B;AACH;;AAED,WAAOA,KAAK,GAAGD,GAAG,GAAG,GAAN,GAAYC,KAAf,GAAuBD,GAAnC;AACH;;AAXmC,mBAajBA,GAAG,CAACK,KAAJ,CAAU,GAAV,EAAe,CAAf,CAbiB;AAAA;AAAA,MAa7BR,IAb6B;AAAA,MAavBS,EAbuB;;AAcpC,MAAMC,WAAW,GAAGC,mBAAmB,CAACF,EAAD,CAAvC;AACA,MAAMG,MAAM,GACR,OAAOR,KAAP,KAAiB,QAAjB,GAA4BO,mBAAmB,CAACP,KAAD,CAA/C,GAAyDA,KAD7D;AAGA,MAAMS,KAAK,GAAGN,mBAAmB,iCAAMG,WAAN,GAAsBE,MAAtB,EAAjC;AAEA,SAAOC,KAAK,GAAGb,IAAI,GAAG,GAAP,GAAaa,KAAhB,GAAwBV,GAApC;AACH;AAED;AACA;AACA;AACA;AACA;;;AACO,SAASQ,mBAAT,CAA6BF,EAA7B,EAAiC;AACpC,MAAI,CAACA,EAAL,EAAS;AACL,WAAO,EAAP;AACH;;AACD,MAAML,KAAK,GAAGK,EAAE,CAAC,CAAD,CAAF,KAAU,GAAV,GAAgBA,EAAE,CAACK,MAAH,CAAU,CAAV,CAAhB,GAA+BL,EAA7C;AACA,MAAMM,KAAK,GAAGX,KAAK,CAACI,KAAN,CAAY,GAAZ,CAAd;AAEA,SAAOO,KAAK,CAACC,MAAN,CAAa,UAACC,CAAD,EAAIC,IAAJ,EAAa;AAAA,sBACdA,IAAI,CAACV,KAAL,CAAW,GAAX,CADc;AAAA;AAAA,QACtBW,CADsB;AAAA,QACnBC,CADmB;;AAE7BH,IAAAA,CAAC,CAACI,kBAAkB,CAACF,CAAD,CAAnB,CAAD,GAA2BC,CAAC,IAAI,IAAL,GAAY,IAAZ,GAAmBC,kBAAkB,CAACD,CAAD,CAAhE;AACA,WAAOH,CAAP;AACH,GAJM,EAIJ,EAJI,CAAP;AAKH;AAED;AACA;AACA;AACA;AACA;;;AACO,SAASV,mBAAT,CAA6Be,GAA7B,EAAkC;AACrC,MAAIP,KAAK,GAAG,EAAZ;;AAEA,OAAK,IAAII,CAAT,IAAcG,GAAd,EAAmB;AACf,QAAMF,CAAC,GAAGE,GAAG,CAACH,CAAD,CAAb;AACA,QAAMI,IAAI,GACNH,CAAC,IAAI,IAAL,GACMI,kBAAkB,CAACL,CAAD,CADxB,aAESK,kBAAkB,CAACL,CAAD,CAF3B,cAEkCK,kBAAkB,CAACJ,CAAD,CAFpD,CADJ;AAIAL,IAAAA,KAAK,CAACU,IAAN,CAAWF,IAAX;AACH;;AAED,SAAOR,KAAK,CAAChB,IAAN,CAAW,GAAX,CAAP;AACH","sourcesContent":["import { dropIfEndsWith, ensureStartsWith } from './text';\n\n/**\n * Join base url and the extra url path.\n * @param  {String} base\n * @param  {String} extraPath\n */\nexport function join(base, extraPath) {\n    return base\n        ? extraPath\n            ? dropIfEndsWith(base, '/') + ensureStartsWith(extraPath, '/')\n            : base\n        : extraPath;\n}\n\n/**\n * Merge the query parameters into given url.\n * @param {string} url - Original url.\n * @param {object} query - Key-value pairs query object to be merged into the url.\n * @returns {string}\n */\nexport function appendQuery(url, query) {\n    if (!query) return url;\n\n    const posQM = url.indexOf('?');\n\n    if (posQM === -1) {\n        if (typeof query !== 'string') {\n            query = objectToQueryString(query);\n        }\n\n        return query ? url + '?' + query : url;\n    }\n\n    const [base, qs] = url.split('?', 2);\n    const previousObj = queryStringToObject(qs);\n    const newObj =\n        typeof query === 'string' ? queryStringToObject(query) : query;\n\n    const newQs = objectToQueryString({ ...previousObj, ...newObj });\n\n    return newQs ? base + '?' + newQs : url;\n}\n\n/**\n * Parse query string into key-value pairs.\n * @param {string} qs\n * @returns {object}\n */\nexport function queryStringToObject(qs) {\n    if (!qs) {\n        return {};\n    }\n    const query = qs[0] === '?' ? qs.substr(1) : qs;\n    const parts = query.split('&');\n\n    return parts.reduce((r, pair) => {\n        const [k, v] = pair.split('=');\n        r[decodeURIComponent(k)] = v == null ? null : decodeURIComponent(v);\n        return r;\n    }, {});\n}\n\n/**\n * Stringify an object into url query string.\n * @param {*} obj\n * @returns\n */\nexport function objectToQueryString(obj) {\n    let parts = [];\n\n    for (let k in obj) {\n        const v = obj[k];\n        const part =\n            v == null\n                ? encodeURIComponent(k)\n                : `${encodeURIComponent(k)}=${encodeURIComponent(v)}`;\n        parts.push(part);\n    }\n\n    return parts.join('&');\n}\n"]}