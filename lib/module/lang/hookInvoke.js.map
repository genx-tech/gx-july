{"version":3,"sources":["hookInvoke.js"],"names":["hookInvoke","obj","onCalling","onCalled","Proxy","get","target","propKey","receiver","origMethod","args","Promise","resolve","name","returned","apply","then","catch"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAMA,UAAU,GAAG,SAAbA,UAAa,CAACC,GAAD,EAAMC,SAAN,EAAiBC,QAAjB;AAAA,SACf,IAAIC,KAAJ,CAAUH,GAAV,EAAe;AACXI,IAAAA,GADW,eACPC,MADO,EACCC,OADD,EACUC,QADV,EACoB;AAC3B,UAAMC,UAAU,GAAGH,MAAM,CAACC,OAAD,CAAzB;;AACA,UAAI,OAAOE,UAAP,KAAsB,UAA1B,EAAsC;AAClC,eAAO,YAAmB;AAAA,4CAANC,IAAM;AAANA,YAAAA,IAAM;AAAA;;AACtBR,UAAAA,SAAS,IACLS,OAAO,CAACC,OAAR,CACIV,SAAS,CAACD,GAAD,EAAM;AAAEY,YAAAA,IAAI,EAAEN,OAAR;AAAiBG,YAAAA,IAAI,EAAJA;AAAjB,WAAN,CADb,CADJ;AAIA,cAAII,QAAQ,GAAGL,UAAU,CAACM,KAAX,CAAiBT,MAAjB,EAAyBI,IAAzB,CAAf;AACAP,UAAAA,QAAQ,IACJQ,OAAO,CAACC,OAAR,CAAgBE,QAAhB,EACKE,IADL,CACU,UAACF,QAAD;AAAA,mBACFH,OAAO,CAACC,OAAR,CACIT,QAAQ,CAACF,GAAD,EAAM;AAAEY,cAAAA,IAAI,EAAEN,OAAR;AAAiBO,cAAAA,QAAQ,EAARA;AAAjB,aAAN,CADZ,CADE;AAAA,WADV,EAMKG,KANL,EADJ;AAQA,iBAAOH,QAAP;AACH,SAfD;AAgBH;;AAED,aAAOL,UAAP;AACH;AAvBU,GAAf,CADe;AAAA,CAAnB;;eA2BeT,U","sourcesContent":["/**\n * Add hooks before an object's method is being called and after.\n * @param {*} obj \n * @param {*} onCalling - Before hook\n * @param {*} onCalled - After hook\n * @returns \n */\nconst hookInvoke = (obj, onCalling, onCalled) =>\n    new Proxy(obj, {\n        get(target, propKey, receiver) {\n            const origMethod = target[propKey];\n            if (typeof origMethod === 'function') {\n                return function (...args) {\n                    onCalling &&\n                        Promise.resolve(\n                            onCalling(obj, { name: propKey, args })\n                        );\n                    let returned = origMethod.apply(target, args);\n                    onCalled &&\n                        Promise.resolve(returned)\n                            .then((returned) =>\n                                Promise.resolve(\n                                    onCalled(obj, { name: propKey, returned })\n                                )\n                            )\n                            .catch();\n                    return returned;\n                };\n            }\n\n            return origMethod;\n        },\n    });\n\nexport default hookInvoke;\n"]}